<form method="GET" class="p-form p-form--inline js-asset-search">
  {% set params = request.values.to_dict() %}

  {% if params.tag %}
  <input type="text" class="u-hide" name="tag" value="{{ params.tag }}">
  {% endif %} 

  <label for="search" class="u-off-screen">Search field</label>
  <input type="search" class="p-form__control" name="tag" placeholder="Search" value="{{ query }}">

  {% set asset_types = [
    "Datasheets", "Guides", "Ebook", "Whitepaper", "Case Study", 
    "Explainer Video", "Tutorial Video", "Demo", "Infographic", 
    "Diagram", "Icon", "Illustration", "Image"
    ] 
  %}
  <label for="asset-type">Asset type</label>
  <select class="js-multiselect" id="asset-type-select">
    {% for asset_type in asset_types %}
      {% set asset_value = asset_type|lower|replace(' ', '-') %}
      <option value="{{ asset_value }}" {% if asset_value in params.asset_type %}selected{% endif %}>
        {{ asset_type }}
      </option>
    {% endfor %}
  </select>

  <div class="p-search-and-filter js-products-search">
    <div class="p-search-and-filter__search-container" aria-expanded="false">
      {% for product in products_list.products %}
        <span class="p-chip js-{{ product.slug }}-chip js-selected {% if product.slug not in params.product_types %}u-hide{% endif %}" data-id="{{ product.slug }}">
          <span class="p-chip__value">{{ product.name }}</span>
          <button class="p-chip__dismiss">Dismiss</button>
        </span>
      {% endfor %}
      <div class="p-search-and-filter__box" data-overflowing="false">
        <label class="u-hide" for="search">Search products</label>
        <input autocomplete="off" class="p-search-and-filter__input js-search-input" id="search" placeholder="Start typing a product name" type="text" value="" aria-labelledby="product-tags">
        <input type="text" class="u-hide js-hidden-input" name="product_types" value="">
        <button alt="search" class="u-off-screen" type="submit" tabindex="-1">Search</button>
      </div>
    </div>
    <div class="p-search-and-filter__panel js-chips-panel" aria-hidden="true">
      <div class="p-filter-panel-section">
        <div class="p-filter-panel-section__header">
          <h4 class="p-filter-panel-section__heading p-heading--5">Tags</h4>
        </div>
        <div class="p-filter-panel-section__chips">
          {% for product in products_list.products %}
          <button class="p-chip js-{{ product.slug }}-chip js-unselected {% if product.slug in params.product_types %}u-hide{% endif %}" id="{{ product.slug }}" data-name="{{ product.name }}">
            <span class="p-chip__value">{{ product.name }}</span>
          </button>
          {% endfor %}
          <p class="js-no-results u-no-margin--bottom u-hide"><strong>No results found...</strong></p>
        </div>
      </div>
    </div>
  </div>
  <button class="p-button--positive">Search</button>
</form>